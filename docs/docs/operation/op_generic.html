<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Generic Operation Guide · UVAP</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Generic Operation Guide"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Generic Operation Guide · UVAP"/><meta property="og:type" content="website"/><meta property="og:url" content="http://docs.ultinous.com/uvap/../../index.html"/><meta property="og:description" content="# Generic Operation Guide"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="../../img/face-200.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="../../css/code-block-buttons.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="../../js/code-block-copy-button.js"></script><script type="text/javascript" src="../../js/code-block-download-button.js"></script><script src="../../js/scrollSpy.js"></script><link rel="stylesheet" href="../../css/main.css"/><script src="../../js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="../../"><img class="logo" src="../../img/ultinous-logo-BW-logo.png" alt="UVAP"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="../../docs/feat/feat_overview.html" target="_self">Key Features</a></li><li class=""><a href="../../docs/demo/demo_overview.html" target="_self">Feature Demos</a></li><li class=""><a href="../../docs/install/uvap_install_sysreq.html" target="_self">Installation</a></li><li class=""><a href="../../docs/dev/uvap_architect.html" target="_self">Developer Guide</a></li><li class="siteNavGroupActive"><a href="../../docs/operation/op_guide.html" target="_self">Operation Guide</a></li><li class=""><a href="../../docs/tutorials/uvap_example_analysis.html" target="_self">Tutorials</a></li><li class=""><a href="../../docs/help/uvap_support.html" target="_self">Help</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Microservice Operation</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Operation Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="../../docs/operation/op_guide.html">UVAP Operation Guide</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Microservice Operation</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="../../docs/operation/op_generic.html">Generic Operation Guide</a></li><li class="navListItem"><a class="navItem" href="../../docs/operation/op_mgr.html">Operating the Multi-Graph Runner</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="generic-operation-guide"></a><a href="#generic-operation-guide" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generic Operation Guide</h1>
<h2><a class="anchor" aria-hidden="true" id="starting-a-microservice"></a><a href="#starting-a-microservice" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Starting a Microservice</h2>
<h3><a class="anchor" aria-hidden="true" id="prerequisites"></a><a href="#prerequisites" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites</h3>
<p>To start a Microservice, UVAP needs to be installed first. For detailed
instructions and more information, see the <a href="../../docs/install/uvap_install_setup.html">Installation</a> guide.</p>
<h3><a class="anchor" aria-hidden="true" id="docker"></a><a href="#docker" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker</h3>
<p>A Microservice can be run in a Docker container. Familiarity with Docker
is required to properly set up production-ready UVAP component instances.
This guide describes how to create and start a container running an UVAP
component, and what UVAP-specific information is required to do so.
However, any other features of Docker can be applied, and the resulting
container may be handled as Docker makes it possible.</p>
<h3><a class="anchor" aria-hidden="true" id="docker-images"></a><a href="#docker-images" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker images</h3>
<p>To create a Docker container, the first thing needed is a Docker image,
and to know the name/tag of that image. In the case of UVAP components,
the name of the Docker image can be determined based on Git tags present
in the UVAP Git repository. These Git tags each represent a given release
version of UVAP, and each UVAP version have specific Docker images of
UVAP components. Determining versions and corresponding Docker image
names can be done as follows:</p>
<ul>
<li><p>The following command prints the most recent release Git tag:</p>
<pre><code class="hljs css language-plaintext codeBlockCopy">$ git -C "${UVAP_HOME}" tag \
    --list \
    --sort=-creatordate \
    --merged HEAD \
    'release/*' \
  | head -n1
</code></pre>
<p>Example output: <code>release/uvap-2.680.1</code></p></li>
<li><p>The following command prints the most recent version postfix of the
name of the Docker images of all UVAP components, by taking the most
recent release Git tag without the <code>release/</code> part:</p>
<pre><code class="hljs css language-plaintext codeBlockCopy">$ git -C "${UVAP_HOME}" tag \
    --list \
    --sort=-creatordate \
    --merged HEAD \
    'release/*' \
  | head -n1 | cut -f2 -d/
</code></pre>
<p>Example output: <code>uvap-2.680.1</code></p></li>
<li><p>If an older version of UVAP is needed instead of the most recent one,
all the previous release tags can be found in the history of the Git
repository (which can be viewed with the<code>git -C &quot;${UVAP_HOME}&quot; log</code>
command). Checking out to the desired version makes the above commands
print information about that release.</p></li>
<li><p>Given a certain UVAP version, the Docker images of UVAP components look
like <code>ultinous/uvap:[component name]_[version]</code>, where:</p>
<ul>
<li><code>[component_name]</code> is the name of the UVAP component - it is written
in the Operation Guide of that component</li>
<li><code>[version]</code> is the above selected UVAP version</li>
</ul></li>
<li><p>Example: the Docker image of the <strong>Detection Filter</strong> Microservice for
the <em>uvap-2.680.1</em> version is:
<code>ultinous/uvap:kafka_detection_filter_uvap-2.680.1</code>.</p></li>
<li><p>Also, the Docker images of the actual most recent version of UVAP
components are tagged with the <code>_latest</code> name postfix as well aside of
the actual version name postfix.</p></li>
<li><p>Example: the Docker image of the <strong>Detection Filter</strong> Microservice for
the actual most recent version is:
<code>ultinous/uvap:kafka_detection_filter_latest</code>.</p></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="docker-containers"></a><a href="#docker-containers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker containers</h3>
<p>To run a Microservice, the next step after the Docker image is determined,
is to create its Docker container. In the following section the set of
UVAP-specific information is described, which needs to be given in the
form of arguments for the <code>docker container create</code> command to create a
container for the Microservice in general. Certain UVAP components, like
<strong>MGR</strong> require more arguments to create the container. See the Operation
Guide of the given Microservice for details.</p>
<p>For each running instance of a Microservice, their own Docker container is
advised to be created as follows:</p>
<ol>
<li><p>Let's refer to the name of the given UVAP component as <code>[component]</code>.</p></li>
<li><p>Determine the Docker image of <code>[component]</code> as written above, and let's
refer to it as <code>[image]</code>.</p></li>
<li><p>Make sure, that the Docker image (<code>[image]</code>) of the container is
present by downloading it from DockerHub:</p>
<pre><code class="hljs css language-plaintext codeBlockCopy">$ docker pull [image]
</code></pre></li>
<li><p>A name is suggested to be given to the container, for example
<code>uvap_[component]</code>, or if multiple instances of the component will be
created, then <code>uvap_[component]_[instance number]</code>. Let's refer to the
given name as <code>[name]</code>. If a name is not specified for the container
manually, then the Docker engine will generate a random name for it.</p>
<p>Some example names:</p>
<ul>
<li>for one <strong>Reidentifier</strong> instance: <code>uvap_reid</code></li>
<li>for two <strong>MGR</strong> instances: <code>uvap_mgr_01</code> and <code>uvap_mgr_02</code></li>
</ul></li>
<li><p>It is advised not run the Microservice as <code>root</code>, but as a less
privileged Unix user, for example a service user specifically created
for the purpose of running UVAP services in general. Find a suitable
Unix user (let's refer to it as <code>[user]</code>), and determine the Unix user
ID and the Unix group ID of it with the <code>id</code> command line utility:</p>
<pre><code class="hljs css language-plaintext codeBlockCopy">$ id -u [user] &amp;&amp; id -g [user]
</code></pre>
<p>Example output:</p>
<pre><code class="hljs">1000
1000
</code></pre>
<p>Let's refer to the user ID (the first line of the output) as <code>[uid]</code>
and to the group ID (the second line of the output) as <code>[gid]</code>.</p></li>
<li><p>The configuration files of the Microservice have to be mounted into the
container, as these are not present in the Docker image, but are
present on the host computer. All Microservices require a <em>properties</em>
configuration file, and aside that, some need a <em>prototxt</em> or a <em>JSON</em>
configuration file as well. See the configuration documentation of the
given Microservice in the <a href="../../docs/dev/uvap_architect.html">Developer Guide</a> for details.
It is advised to create a separate subdirectory for the configuration
files of the Microservice, and place all the necessary configuration
files there, so mounting this one subdirectory will make all the
configuration files present in the container. Let's refer to this
directory on the host as <code>[conf_on_host]</code>, and as
<code>[conf_in_container]</code> in the container.</p></li>
<li><p>An environment variable has to be present, which specifies, where the
main configuration file of the Microservice in the container will be.
The name of this environment variable depends on the UVAP component,
see it in the Microservice Configuration sections in the
<a href="../../docs/dev/uvap_architect.html">Developer Guide</a> of the component itself - let's refer to
it as <code>[properties_env_var_name]</code>. The value of this environment
variable depends on where the configuration files are mounted into the
container by the previous step. Let's refer to it as
<code>[properties_env_var_value]</code>.</p>
<p>Example: when creating a container for a <strong>Tracker</strong> Microservice, the
name of the environment variable has to be
<code>KAFKA_TRACKER_MS_PROPERTY_FILE_PATHS</code>, and the value of it can be e.g.
<code>/etc/uvap/tracker/01/tracker.properties</code>, the only constraint is that
this configuration file of properties of the Microservice has to be in
the directory (or in a subdirectory of) <code>[conf_in_container]</code>.</p></li>
<li><p>The Docker network in which the Microservice will take place has to be
given. Any network is suitable, from which the configured Kafka cluster
can be reached. Let's refer to this network as <code>[network]</code>.
To quickly test, whether the configured Kafka cluster is reachable from
<code>[network]</code> with the Kafka broker <code>[broker]</code>, run a
produce-and-consume <code>kafkacat</code> routine with the following test
containers:</p>
<pre><code class="hljs css language-plaintext codeBlockCopy">$ echo "test message" \
  | docker run -i --rm --net [network] edenhill/kafkacat:1.5.0 kafkacat \
    -b [broker] \
    -P \
    -t docker-network-test
$ docker run --rm --net [network] edenhill/kafkacat:1.5.0 kafkacat \
    -b [broker] \
    -C \
    -t docker-network-test \
    -o -1 -e
</code></pre>
<p>The expected output is the &quot;test message&quot; string, and that the end of
the test topic is reached.</p></li>
<li><p>The configuration of the Microservice specifies some port numbers for
certain network services of the Microservice. These ports may be needed
to be opened on the host as well, not only in the container (as done by
default). This can be done by publishing these ports. It is not
necessary if the <code>host</code> network is chosen in the previous step. Let's
refer to these port numbers as <code>[port_1]</code>, <code>[port_2]</code>, <code>[...]</code> and
<code>[port_n]</code>.</p></li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="creating-and-starting-containers"></a><a href="#creating-and-starting-containers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating and starting containers</h4>
<p>Given all the above information, containers for all Microservices can be
created with any of the Docker-supporting orchestration systems. A few
examples are present in the following sections, but plenty of other
solutions are out there, or if you want, you may create your own
container-management system.</p>
<h5><a class="anchor" aria-hidden="true" id="docker-cli"></a><a href="#docker-cli" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker CLI</h5>
<p>Using the command-line-interface of the Docker engine is the most basic
way to create a Docker container. It's suitable for practicing and
smoke-testing UVAP, but less usable for managing a reasonably big
production environment.
A container can be created with the following example command:</p>
<pre><code class="hljs css language-plaintext codeBlockCopy">$ docker container create \
  --name [name] \
  --user [uid]:[gid] \
  -v "[conf_on_host]:[conf_in_container]:ro" \
  --env [properties_env_var_name]="[properties_env_var_value]" \
  --net [network] \
  --publish [port_1]:[port_1] \
  --publish [port_2]:[port_2] \
  [...] \
  --publish [port_n]:[port_n] \
  [image]
</code></pre>
<p>After the container is created, the Microservice is not yet running, but
can be started in two different ways:</p>
<ul>
<li><p>Foreground mode: the console is blocked until the Microservice finishes
running, and the output of the container in printed on the console. This
is suitable for batch-processing data with the Microservice. To start
the Microservice in foreground mode, run the following command:</p>
<pre><code class="hljs css language-plaintext codeBlockCopy">$ docker container start --attach [name]
</code></pre></li>
<li><p>Background mode: the Microservice runs as a daemon, does not affect the
console, and the output of the container is handled by Docker as the log
of the container. This is suitable for live analysis. To start the
Microservice in background mode, run the following command:</p>
<pre><code class="hljs css language-plaintext codeBlockCopy">$ docker container start [name]
</code></pre></li>
</ul>
<h5><a class="anchor" aria-hidden="true" id="docker-compose"></a><a href="#docker-compose" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker Compose</h5>
<p><a href="https://docs.docker.com/compose/">Docker Compose</a> is a more advanced tool than the Docker CLI. Using it
makes your UVAP Microservices manageable in a more convenient way. Docker
Compose makes it possible to describe all your containers in one or more
configuration files (called <a href="https://docs.docker.com/compose/compose-file/compose-file-v2/">Compose files</a>), defining a whole
application by doing so, and then use the Docker Compose CLI anytime to
manage the application easily.
An example Compose file for creating a container follows:</p>
<pre><code class="hljs css language-yaml codeBlockCopy"><span class="hljs-attr">version:</span> <span class="hljs-string">'2.3'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-string">[name]:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">'[image]'</span>
    <span class="hljs-attr">user:</span> <span class="hljs-string">'[uid]:[gid]'</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">bind</span>
        <span class="hljs-attr">source:</span> <span class="hljs-string">'[conf_on_host]'</span>
        <span class="hljs-attr">target:</span> <span class="hljs-string">'[conf_in_container]'</span>
        <span class="hljs-attr">read_only:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'[properties_env_var_name]=[properties_env_var_value]'</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">[port_1]:[port_1]</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">[port_2]:[port_2]</span>
      <span class="hljs-string">[...]</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">[port_n]:[port_n]</span>
<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">default:</span>
    <span class="hljs-attr">external:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">[network]</span>
</code></pre>
<p>After creating such Compose file(s), the Microservices can be started up
in background mode with the following command:</p>
<pre><code class="hljs css language-plaintext codeBlockCopy">docker-compose up --detach
</code></pre>
<p>As can be seen, issuing one CLI command is enough at a time, no matter how
much Microservices there are defined.</p>
<p>Docker Compose not only helps a lot with creating and starting many
containers, but also has several other useful features.</p>
<h4><a class="anchor" aria-hidden="true" id="other-container-tricks-and-tips"></a><a href="#other-container-tricks-and-tips" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other container tricks and tips</h4>
<p>As mentioned earlier, creating such Docker containers to run UVAP
Microservices results in completely conventional Docker containers, and
any features of the Docker engine not mentioned above can be applied to
these containers. That being said, all the above information are really
just examples, and only point to the UVAP-specific good-to-knows.</p>
<p>In a production environment the following additional container
configurations might be useful to take into consideration:</p>
<ul>
<li>Setting a restart policy</li>
<li>Using a different logging engine, e.g. <em>syslog</em></li>
<li>Limiting resource usages</li>
<li>Modifying health-check options</li>
<li>Managing namespaces</li>
<li>Overriding security options</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="../../docs/operation/op_guide.html"><span class="arrow-prev">← </span><span>UVAP Operation Guide</span></a><a class="docs-next button" href="../../docs/operation/op_mgr.html"><span>Operating the Multi-Graph Runner</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#starting-a-microservice">Starting a Microservice</a><ul class="toc-headings"><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#docker">Docker</a></li><li><a href="#docker-images">Docker images</a></li><li><a href="#docker-containers">Docker containers</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="../../" class="nav-home"></a><div class="help"><h5>Help</h5><a href="docs/assets/UVAP_License_Terms.pdf">UVAP License Terms</a><a href="../../docs/help/uvap_gloss.html">Glossary</a><a href="../../docs/help/uvap_notations.html">Typographic Conventions</a><a href="../../docs/help/uvap_tm.html">Trademark Information</a><a href="../../docs/help/uvap_support.html">Support</a></div><div class="nav"><h5>Navigation</h5><a href="../../docs/feat/feat_overview.html">Key Features</a><a href="../../docs/demo/demo_overview.html">Feature Demos</a><a href="../../docs/install/uvap_install_sysreq.html">Installation</a><a href="../../docs/dev/uvap_architect.html">Developer Guide</a><a href="../../docs/tutorials/uvap_example_analysis.html">Tutorials</a><a href="../../help.html">Help</a></div><div class="comm"><h5>Community</h5><a href="https://github.com/Ultinous/uvap" target="_blank">GitHub</a><a href="https://www.facebook.com/ultinousltd/" target="_blank">Facebook</a><a href="https://www.linkedin.com/company/6380970/" target="_blank">LinkedIn</a><a href="https://twitter.com/ultinousltd" target="_blank">Twitter</a><a href="https://www.youtube.com/channel/UCeQmAy_RLLhgcTxSCFljBDA" target="_blank">YouTube</a></div></section><a href="https://www.ultinous.com" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="../../img/Ultinous-logo_white_web.png" alt="Ultinous"/></a><section class="copyright">Copyright © 2019-2020 Ultinous</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '537f90d4167048c6fde59df438687767',
                indexName: 'uvap',
                inputSelector: '#search_input_react'
              });
            </script></body></html>