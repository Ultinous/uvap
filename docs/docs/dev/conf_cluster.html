<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Configuring Feature Vector Clustering · UVAP</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Configuring Feature Vector Clustering"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Configuring Feature Vector Clustering · UVAP"/><meta property="og:type" content="website"/><meta property="og:url" content="http://docs.ultinous.com/uvap/../../index.html"/><meta property="og:description" content="# Configuring Feature Vector Clustering"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="../../img/face-200.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="../../css/code-block-buttons.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="../../js/code-block-copy-button.js"></script><script type="text/javascript" src="../../js/code-block-download-button.js"></script><script src="../../js/scrollSpy.js"></script><link rel="stylesheet" href="../../css/main.css"/><script src="../../js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="../../"><img class="logo" src="../../img/ultinous-logo-BW-logo.png" alt="UVAP"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="../../docs/feat/feat_overview.html" target="_self">Key Features</a></li><li class=""><a href="../../docs/demo/demo_overview.html" target="_self">Feature Demos</a></li><li class=""><a href="../../docs/install/uvap_install_sysreq.html" target="_self">Installation</a></li><li class="siteNavGroupActive"><a href="../../docs/dev/uvap_architect.html" target="_self">Developer Guide</a></li><li class=""><a href="../../docs/tutorials/uvap_example_analysis.html" target="_self">Tutorials</a></li><li class=""><a href="../../help.html" target="_self">Help</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Microservice Configuration</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Developer Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="../../docs/dev/uvap_architect.html">Architecture</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/uvap_data_model.html">Data Model</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Microservices</h4><ul><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_mgr.html">Multi-Graph Runner</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_track.html">Tracker</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_passdet.html">Pass Detector</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_reid.html">Reidentifier</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_cluster.html">Feature Vector Clustering</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_det_filter.html">Detection Filter</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Microservice Configuration</h4><ul><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_superconfig.html">Microservice Superconfiguration</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_mgr.html">Configuring Multi-Graph Runner</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_track.html">Configuring Tracker</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_passdet.html">Configuring Pass Detector</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_reid.html">Configuring Reidentifier</a></li><li class="navListItem navListItemActive"><a class="navItem" href="../../docs/dev/conf_cluster.html">Configuring Feature Vector Clustering</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_det_filter.html">Configuring the Detection Filter</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tools</h4><ul><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_sc_ui.html">Stream Configurator UI Guide</a></li></ul></div><li class="navListItem"><a class="navItem" href="../../docs/dev/uvap_extend.html">Extending UVAP</a></li><li class="navListItem"><a class="navItem" href="../../docs/operation/op_opguide.html">UVAP Operation Guide</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="configuring-feature-vector-clustering"></a><a href="#configuring-feature-vector-clustering" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring Feature Vector Clustering</h1>
<p>This microservice does not require GPU resources.</p>
<p><strong>Feature Vector Clustering</strong> can be run in <em>batch mode</em>. When running in
batch mode, the microservice stops after processing the last
record. Otherwise it keeps running and waits for more records.</p>
<p>The general part of the configuration defines if <em>Cluster Merging</em>, <em>Cluster Realization</em>
or both are used.</p>
<h2><a class="anchor" aria-hidden="true" id="environment-variables"></a><a href="#environment-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment Variables</h2>
<ul>
<li><code>KAFKA_FVC_MS_PROPERTY_FILE_PATHS</code>: property files path list.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="properties"></a><a href="#properties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Properties</h2>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkafeaturevectorclusteringauthdefsdata"></a><a href="#ultinousservicekafkafeaturevectorclusteringauthdefsdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.feature.vector.clustering.auth.defs.data</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.feature.vector.clustering.auth.defs.data</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Authentication definition data in JSON format corresponding to the definitions described in <a href="../../docs/dev/conf_superconfig.html#authentication-definition">Superconfig Authentication Definitions</a>.</td></tr>
<tr><td>Required</td><td>Optional</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkafeaturevectorclusteringauthdefsfile"></a><a href="#ultinousservicekafkafeaturevectorclusteringauthdefsfile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.feature.vector.clustering.auth.defs.file</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.feature.vector.clustering.auth.defs.file</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Authentication definition file path in JSON format corresponding to the definitions described in <a href="../../docs/dev/conf_superconfig.html#authentication-definition">Superconfig Authentication Definitions</a>.</td></tr>
<tr><td>Required</td><td>Optional</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkafeaturevectorclusteringmsconfigdata"></a><a href="#ultinousservicekafkafeaturevectorclusteringmsconfigdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.feature.vector.clustering.ms.config.data</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.feature.vector.clustering.ms.config.data</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td><strong>Feature Vector Clustering</strong> microservice configuration in JSON format corresponding to the definitions described in <a href="../../docs/dev/conf_superconfig.html#topic-definitions">Superconfig Topic Definitions</a>.</td></tr>
<tr><td>Required</td><td>Required</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkafeaturevectorclusteringmsconfigfile"></a><a href="#ultinousservicekafkafeaturevectorclusteringmsconfigfile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.feature.vector.clustering.ms.config.file</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.feature.vector.clustering.ms.config.file</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td><strong>Feature Vector Clustering</strong> microservice configuration file path in JSON format corresponding to the definitions described in <a href="../../docs/dev/conf_superconfig.html#topic-definitions">Superconfig Topic Definitions</a>.</td></tr>
<tr><td>Required</td><td>Required</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkafeaturevectorclusteringconfigdata"></a><a href="#ultinousservicekafkafeaturevectorclusteringconfigdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.feature.vector.clustering.config.data</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.feature.vector.clustering.config.data</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Clustering configuration defined in JSON format.</td></tr>
<tr><td>Required</td><td>Optional</td></tr>
<tr><td>Notes</td><td>Set only if the global configuration does not contain service configuration (the <code>configData</code> field is not set for <code>ClusteringConfigRecord</code>).</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkafeaturevectorclusteringconfigfile"></a><a href="#ultinousservicekafkafeaturevectorclusteringconfigfile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.feature.vector.clustering.config.file</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.feature.vector.clustering.config.file</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Clustering configuration file path in JSON format</td></tr>
<tr><td>Required</td><td>Optional</td></tr>
<tr><td>Notes</td><td>Set only if the global configuration does not contain service configuration (the <code>configData</code> field is not set for <code>ClusteringConfigRecord</code>).</td><td></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkafeaturevectorclusteringmonitoringport"></a><a href="#ultinousservicekafkafeaturevectorclusteringmonitoringport" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.feature.vector.clustering.monitoring.port</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.feature.vector.clustering.monitoring.port</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Monitoring server port.</td></tr>
<tr><td>Required</td><td>Required</td></tr>
<tr><td>Value Type</td><td><code>uint16</code></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkafeaturevectorclusteringmonitoringthreads"></a><a href="#ultinousservicekafkafeaturevectorclusteringmonitoringthreads" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.feature.vector.clustering.monitoring.threads</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.feature.vector.clustering.monitoring.threads</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Monitoring server thread pool size.</td></tr>
<tr><td>Required</td><td>Required</td></tr>
<tr><td>Value Type</td><td><code>uint16</code></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="output-schemas"></a><a href="#output-schemas" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output Schemas</h2>
<p>Configuration records are separated into the following values:</p>
<ul>
<li><code>ClusteringMSConfig</code> specified in <a href="../../proto_files/ultinous/proto/common/kafka_superconfig.proto.html">Kafka superconfiguration proto</a></li>
<li><code>FVClusteringConfigRecord</code> specified in <a href="../../proto_files/ultinous/proto/common/kafka_config.proto.html">Kafka configuration proto</a></li>
</ul>
<p>While the output record is defined as <code>FVClusterUpdateRecord</code> specified in <a href="../../proto_files/ultinous/proto/common/kafka_data.proto.html">Kafka data proto</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="example-of-a-clusteringmsconfig-from-kafka"></a><a href="#example-of-a-clusteringmsconfig-from-kafka" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example of a ClusteringMSConfig from Kafka</h3>
<pre><code class="hljs css language-json5 codeBlockCopy">{
  <span class="hljs-attr">"source_options"</span>:
  {
    <span class="hljs-attr">"start"</span>:<span class="hljs-string">"START_DATETIME"</span>,
    <span class="hljs-attr">"start_date_time"</span>: <span class="hljs-string">"2019-05-31T10:30:00.000 +02:00"</span>,
    <span class="hljs-attr">"end"</span>:<span class="hljs-string">"END_NEVER"</span>
  },
  <span class="hljs-attr">"sources"</span>:
  [
    {
      <span class="hljs-attr">"broker_list"</span>:<span class="hljs-string">"demoserver:9092"</span>,
      <span class="hljs-attr">"name"</span>:<span class="hljs-string">"cam.entrance.FeatureVectorRecord.json"</span>
    },
    {
      <span class="hljs-attr">"broker_list"</span>:<span class="hljs-string">"demoserver:9092"</span>,
      <span class="hljs-attr">"name"</span>:<span class="hljs-string">"cam.exit.FeatureVectorRecord.json"</span>
    }
  ],
  <span class="hljs-attr">"target_options"</span>:
  {
    <span class="hljs-attr">"handling"</span>:<span class="hljs-string">"REPLACE"</span>
  },
  <span class="hljs-attr">"target"</span>:
  {
    <span class="hljs-attr">"broker_list"</span>:<span class="hljs-string">"localhost:9092"</span>,
    <span class="hljs-attr">"name"</span>:<span class="hljs-string">"sample.ReidRecord.json"</span>
  }
}
</code></pre>
<p>In this example, the sources are set to be read from the given date and never stop being read (no end time is specified). Two feature vector sources are defined with broker list and name. The target stream is being replaced and also defined with broker list and name.</p>
<h3><a class="anchor" aria-hidden="true" id="example-of-an-fvclusteringconfigrecord-from-kafka"></a><a href="#example-of-an-fvclusteringconfigrecord-from-kafka" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example of an FVClusteringConfigRecord from Kafka</h3>
<pre><code class="hljs css language-json5 codeBlockCopy">{
   <span class="hljs-attr">"clustering_config"</span>: {
       <span class="hljs-attr">"method"</span>: <span class="hljs-string">"[USE_LAST | SIMPLE_AVERAGE | EXP_AVERAGE]"</span>,
       <span class="hljs-attr">"cluster_merging"</span>: {
           <span class="hljs-attr">"initial_threshold"</span>: <span class="hljs-number">0.8</span>,
           <span class="hljs-attr">"threshold_discount_rate"</span>: <span class="hljs-number">0.95</span>,
           <span class="hljs-attr">"min_threshold"</span>: <span class="hljs-number">0.6</span>,
           <span class="hljs-attr">"time_interval_ms"</span>: <span class="hljs-number">4</span>
       },
       <span class="hljs-attr">"cluster_realization"</span>: {
           <span class="hljs-attr">"num_samples"</span>: <span class="hljs-number">5</span>,
           <span class="hljs-attr">"time_limit_ms"</span>: <span class="hljs-number">10000</span>
       },
       <span class="hljs-attr">"save_internal_state"</span>: <span class="hljs-literal">true</span>,
       <span class="hljs-attr">"start_from_internal_state"</span>: <span class="hljs-literal">true</span>
   },
   <span class="hljs-attr">"input_stream_configs"</span>: [{
       <span class="hljs-attr">"stream_id"</span>: <span class="hljs-string">"camera_1"</span>,
       <span class="hljs-attr">"fv_field_selector"</span>: {
           <span class="hljs-attr">"[feature_vector_path | fv_cluster_path]"</span>: <span class="hljs-string">"features"</span>
       },
       <span class="hljs-attr">"reg_stream_config"</span>: {
           <span class="hljs-attr">"reg_threshold"</span>: <span class="hljs-number">0.8</span>,
           <span class="hljs-attr">"cluster_retention_period_ms"</span>: <span class="hljs-number">86400000</span>,
       },
   }]
}
</code></pre>
<p><strong><em>FVClusteringConfigRecord Example</em></strong>  <br>
<em>See the table below for field descriptions.</em></p>
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>clustering_config</code></td><td>Configuration for the clustering.</td></tr>
<tr><td><code>method</code></td><td>Defines the clustering method. See <a href="#clustering_methods">Clustering Methods</a> for possible values.</td></tr>
<tr><td><code>cluster_merging</code></td><td>Shows that the event is a merge attempt, triggered by the first input arriving after the time interval set by <code>time_interval_ms</code> since the last attempt. Clusters more similar to each other than the <a href="#current_threshold">Current Similarity Threshold</a> are merged.<br>Optional, must be null for <code>&quot;method&quot;: &quot;USE_LAST&quot;</code></td></tr>
<tr><td><code>initial_threshold</code></td><td>Child parameter of <code>cluster_merging</code>. Initial similarity threshold value. See <a href="#current_threshold">Current Similarity Threshold</a>.</td></tr>
<tr><td><code>threshold_discount_rate</code></td><td>Child parameter of <code>cluster_merging</code>. Rate of decreasing the similarity threshold. See <a href="#current_threshold">Current Similarity Threshold</a>.</td></tr>
<tr><td><code>min_threshold</code></td><td>Child parameter of <code>cluster_merging</code>. Minimal value of the similarity threshold. See <a href="#current_threshold">Current Similarity Threshold</a>.</td></tr>
<tr><td><code>time_interval_ms</code></td><td>Child parameter of <code>cluster_merging</code>. Time interval set in milliseconds.</td></tr>
<tr><td><code>cluster_realization</code></td><td>Shows that the event is a cluster realization.<br>Optional, must be null for <code>&quot;method&quot;: &quot;USE_LAST&quot;</code>.</td></tr>
<tr><td><code>num_samples</code></td><td>Child parameter of <code>cluster_realization</code>. The number of observations in realized clusters. (when feasible within the set time limit).</td></tr>
<tr><td><code>time_limit_ms</code></td><td>Child parameter of <code>cluster_realization</code>. A time limit set in milliseconds for realization even if the number of observations does not reach the value set by <code>num_samples</code>.<br>Measured from the first observation belonging to the cluster, after the previous realization of the same cluster.</td></tr>
<tr><td><code>save_internal_state</code></td><td>If set to <code>true</code>, internal states are saved to a dedicated Kafka topic. See <a href="../../docs/dev/func_save_start_from_int_state.html">Save and Start from Internal State</a>.</td></tr>
<tr><td><code>start_from_internal_state</code></td><td>If set to <code>true</code>, the saved internal states are used to rebuild the DB instead of the input topics when the Feature Vector Clustering microservice starts. See <a href="../../docs/dev/func_save_start_from_int_state.html">Save and Start from Internal State</a>.</td></tr>
<tr><td><code>input_stream_configs</code></td><td>Configuration for input streams. Must contain the same number of records as the number of input streams defined in <code>ClusteringMSConfig</code> (the i<sup>th</sup> input stream is assigned to the i<sup>th</sup> configuration record).</td></tr>
<tr><td><code>stream_id</code></td><td>An arbitrary but application-unique name for the input stream.</td></tr>
<tr><td><code>fv_field_selector</code></td><td>Selects a feature vector or cluster field in the input record. See <code>feature_vector_path</code> and <code>fv_cluster_path</code> child parameters.</td></tr>
<tr><td><code>feature_vector_path</code></td><td>Child parameter of <code>fv_field_selector</code>. Specifies the path to a field of type <code>FeatureVector</code> within the input record.<br>String.</td></tr>
<tr><td><code>fv_cluster_path</code></td><td>Child parameter of <code>fv_field_selector</code>. Specifies the path to a field of type <code>FVCluster</code> within the input record.<br>String.</td></tr>
<tr><td><code>reg_stream_config</code></td><td>Contains the properties of the registration stream.</td></tr>
<tr><td><code>reg_threshold</code></td><td>Child parameter of <code>reg_stream_config</code>. If the similarity between the input feature vector and any stored cluster is less than this value, a new cluster is registered. Otherwise, the cluster with the highest similarity score is updated. <br>Must be in the <code>[0.0..1.0]</code> interval, default is <code>0.0</code>. The value <code>1.0</code> means that every feature vector is stored.</td></tr>
<tr><td><code>cluster_retention_period_ms</code></td><td>Child parameter of <code>reg_stream_config</code>. Time interval in milliseconds; clusters stored for longer time than this period are deleted from the registration database. <code>0</code> means nothing is deleted.<br>Default is <code>0</code>.<br>Cluster delete events are triggered by the first input after the retention period expires.<br>The same period is used to look back to the previous inputs at startup when <code>start_from_internal_state</code> is false.</td></tr>
<tr><td><code>realized_cluster_action</code></td><td>Determines how realized clusters are handled:<br><code>0</code>: <strong>INVALID</strong><br><code>1</code>: <strong>REMOVE</strong> - Remove the realized cluster from internal DB. A delete event is triggered.<br><code>2</code>: <strong>UNREALIZE</strong> - The realized cluster becomes unrealized until <code>num_samples</code> number of new observations arrive again.<br><code>3</code>: <strong>KEEP REALIZED</strong> - Once realized, the cluster remains realized until removed.</td></tr>
</tbody>
</table>
<p><a name="clustering_methods"></a>
<strong>Clustering methods</strong>  <br>
The following values are valid for the <code>method</code> field:</p>
<ul>
<li><p><code>USE_LAST</code>: If an observed feature vector is recognized to belong to a
previously stored cluster, its representative feature vector is replaced
by the newly observed one.</p></li>
<li><p><code>SIMPLE_AVERAGE</code>: Stores the average feature vector of the matching observations as cluster representative, and the number of samples (that are averaged).</p></li>
</ul>
<p><a name="current_threshold"></a></p>
<blockquote>
<p><strong>Current Similarity Threshold</strong></p>
<pre><code class="hljs">current_threshold = max(min_threshold, initial_threshold × threshold_discount_rate^num_inputs)
</code></pre>
<p>where <code>num_inputs</code> is the sum of the potentially mergeable clusters.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="examples-of-fvclusterupdaterecord-from-kafka"></a><a href="#examples-of-fvclusterupdaterecord-from-kafka" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples of FVClusterUpdateRecord from Kafka</h3>
<p><code>FVClusterUpdateRecord</code> can have the following events indicated by the <code>type</code> field:</p>
<ul>
<li><p><code>REG_EVENT</code>: the event is a registration or a cluster update</p></li>
<li><p><code>MERGE_EVENT</code>: the event is a cluster merge (some clusters are merged into one)</p></li>
<li><p><code>DELETE_EVENT</code>: the event is a cluster removal (its retention period expires)</p></li>
<li><p><code>END_OF_INPUT_RECORD</code>: the input is processed and there are no more messages:</p>
<pre><code class="hljs css language-json5">{<span class="hljs-attr">"type"</span>:<span class="hljs-string">"END_OF_INPUT_RECORD"</span>}
</code></pre></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="registration-fvclusterupdaterecord-example"></a><a href="#registration-fvclusterupdaterecord-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Registration FVClusterUpdateRecord Example</h4>
<pre><code class="hljs css language-json5">{<span class="hljs-attr">"type"</span>:<span class="hljs-string">"REG_EVENT"</span>,
 <span class="hljs-attr">"reg_event"</span>:
  {
    <span class="hljs-attr">"cluster_id"</span>:
      {
        <span class="hljs-attr">"first_detection_time"</span>:<span class="hljs-string">"1571138183912"</span>,
        <span class="hljs-attr">"first_detection_key"</span>:<span class="hljs-string">"1571138183912_0"</span>,
        <span class="hljs-attr">"first_detection_stream_id"</span>:<span class="hljs-string">"entranceCamera"</span>
      },
    <span class="hljs-attr">"cluster"</span>:
      {
        <span class="hljs-attr">"representative_fv"</span>:
          {
            <span class="hljs-attr">"model_id"</span>:<span class="hljs-string">"face_rec_v6"</span>,
            <span class="hljs-attr">"feature"</span>:[<span class="hljs-number">-0.884964168</span>,<span class="hljs-number">-0.394254386</span>, ... ,<span class="hljs-number">0.100110188</span>,<span class="hljs-number">0.529844344</span>],
            <span class="hljs-attr">"type"</span>:<span class="hljs-string">"PERSON_FACE"</span>
          },
        <span class="hljs-attr">"num_observations"</span>:<span class="hljs-number">1</span>,
        <span class="hljs-attr">"is_realized"</span>:<span class="hljs-literal">true</span>
      },
    <span class="hljs-attr">"input_stream_id"</span>:<span class="hljs-string">"entranceCamera"</span>,
  }
}
</code></pre>
<p>This example shows a <code>reg_event</code> event, which refers to one of the following
cases:</p>
<ul>
<li><p>The observed feature vector or cluster is not found in the database, so a
new cluster is created.</p></li>
<li><p>The observed feature vector or cluster is found in the database,
so an already stored cluster is updated.</p></li>
</ul>
<p>The record shows the same information in both cases.</p>
<p>The <code>input_stream_id</code> field of the event shows that the feature vector comes from
the source which has the ID <code>entranceCamera</code>.</p>
<p>The <code>cluster_id</code> field contains the time, key and stream information of the
detection.</p>
<p>The <code>cluster</code> field contains information about the stored cluster.
The <code>representative_fv</code> field is a representation of all feature vectors in
this cluster. It is not necessarily equal to any input feature vector.
<code>num_observations</code> shows the number of input feature vectors belonging
to this cluster.</p>
<p><code>is_realized</code> shows if a cluster is ready to be used for further processing,
see <code>cluster_realization</code> in <a href="#example-of-an-fvclusteringconfigrecord-from-kafka"><code>FVClusteringConfigRecord</code></a>.
If its value is <code>false</code>, then outputs are only saved to keep track of input
keys and their clusters.</p>
<h4><a class="anchor" aria-hidden="true" id="merge-fvclusterupdaterecord-example"></a><a href="#merge-fvclusterupdaterecord-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merge FVClusterUpdateRecord Example</h4>
<pre><code class="hljs css language-json5">{<span class="hljs-attr">"type"</span>:<span class="hljs-string">"MERGE_EVENT"</span>,
  <span class="hljs-attr">"merge_event"</span>:
  {
    <span class="hljs-attr">"cluster_id"</span>:
      {
        <span class="hljs-attr">"first_detection_time"</span>:<span class="hljs-string">"1571138183912"</span>,
        <span class="hljs-attr">"first_detection_key"</span>:<span class="hljs-string">"1571138183912_0"</span>,
        <span class="hljs-attr">"first_detection_stream_id"</span>:<span class="hljs-string">"entranceCamera"</span>
      },
    <span class="hljs-attr">"cluster"</span>:
      {
        <span class="hljs-attr">"representative_fv"</span>:
          {
            <span class="hljs-attr">"model_id"</span>:<span class="hljs-string">"face_rec_v6"</span>,
            <span class="hljs-attr">"feature"</span>:[<span class="hljs-number">-0.884964168</span>,<span class="hljs-number">-0.394254386</span>, ... ,<span class="hljs-number">0.100110188</span>,<span class="hljs-number">0.529844344</span>],
            <span class="hljs-attr">"type"</span>:<span class="hljs-string">"PERSON_FACE"</span>
          },
        <span class="hljs-attr">"num_observations"</span>:<span class="hljs-number">1</span>
      },
    <span class="hljs-attr">"merged_clusters"</span>:
      [
        {
          <span class="hljs-attr">"first_detection_time"</span>:<span class="hljs-string">"1571138183912"</span>,
          <span class="hljs-attr">"first_detection_key"</span>:<span class="hljs-string">"1571138183912_0"</span>,
          <span class="hljs-attr">"first_detection_stream_id"</span>:<span class="hljs-string">"entranceCamera"</span>
        },
        {
          <span class="hljs-attr">"first_detection_time"</span>:<span class="hljs-string">"1571146859533"</span>,
          <span class="hljs-attr">"first_detection_key"</span>:<span class="hljs-string">"1571146859533_0"</span>,
          <span class="hljs-attr">"first_detection_stream_id"</span>:<span class="hljs-string">"entranceCamera"</span>
        }
      ]
  }
}
</code></pre>
<p>This example shows a <code>merge_event</code> event, meaning that some clusters are merged
into one.</p>
<p>The <code>cluster_id</code> field contains the time, key and stream information after
merging.</p>
<p>The <code>cluster</code> field contains information about the stored cluster after merging.
The <code>representative_fv</code> field is a representation of all feature vectors in
this cluster. It is not necessarily equal to any input feature vector.
<code>num_observations</code> shows the number of input feature vectors belonging
to this cluster.</p>
<p>The <code>merged_clusters</code> field contains a list of records containing information
of the merged clusters</p>
<h4><a class="anchor" aria-hidden="true" id="deletion-fvclusterupdaterecord-example"></a><a href="#deletion-fvclusterupdaterecord-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deletion FVClusterUpdateRecord Example</h4>
<pre><code class="hljs css language-json5">{<span class="hljs-attr">"type"</span>:<span class="hljs-string">"DELETE_EVENT"</span>,
  <span class="hljs-attr">"delete_event"</span>:
    {
      <span class="hljs-attr">"deleted_cluster"</span>:
        {
          <span class="hljs-attr">"first_detection_time"</span>:<span class="hljs-string">"1571138183912"</span>,
          <span class="hljs-attr">"first_detection_key"</span>:<span class="hljs-string">"1571138183912_0"</span>,
          <span class="hljs-attr">"first_detection_stream_id"</span>:<span class="hljs-string">"entranceCamera"</span>
        }
      }
}
</code></pre>
<p>This example shows a <code>delete_event</code> event, meaning that a cluster is deleted
because its retention period expired. For information on cluster retention
period, see <code>cluster_retention_period</code> in <a href="#example-of-an-fvclusteringconfigrecord-from-kafka"><code>FVClusteringConfigRecord</code></a>.</p>
<p>The <code>deleted_cluster</code> field contains the first detection time, key and stream
information of the deleted cluster.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="../../docs/dev/conf_reid.html"><span class="arrow-prev">← </span><span>Configuring Reidentifier</span></a><a class="docs-next button" href="../../docs/dev/conf_det_filter.html"><span>Configuring the Detection Filter</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#environment-variables">Environment Variables</a></li><li><a href="#properties">Properties</a><ul class="toc-headings"><li><a href="#ultinousservicekafkafeaturevectorclusteringauthdefsdata">ultinous.service.kafka.feature.vector.clustering.auth.defs.data</a></li><li><a href="#ultinousservicekafkafeaturevectorclusteringauthdefsfile">ultinous.service.kafka.feature.vector.clustering.auth.defs.file</a></li><li><a href="#ultinousservicekafkafeaturevectorclusteringmsconfigdata">ultinous.service.kafka.feature.vector.clustering.ms.config.data</a></li><li><a href="#ultinousservicekafkafeaturevectorclusteringmsconfigfile">ultinous.service.kafka.feature.vector.clustering.ms.config.file</a></li><li><a href="#ultinousservicekafkafeaturevectorclusteringconfigdata">ultinous.service.kafka.feature.vector.clustering.config.data</a></li><li><a href="#ultinousservicekafkafeaturevectorclusteringconfigfile">ultinous.service.kafka.feature.vector.clustering.config.file</a></li><li><a href="#ultinousservicekafkafeaturevectorclusteringmonitoringport">ultinous.service.kafka.feature.vector.clustering.monitoring.port</a></li><li><a href="#ultinousservicekafkafeaturevectorclusteringmonitoringthreads">ultinous.service.kafka.feature.vector.clustering.monitoring.threads</a></li></ul></li><li><a href="#output-schemas">Output Schemas</a><ul class="toc-headings"><li><a href="#example-of-a-clusteringmsconfig-from-kafka">Example of a ClusteringMSConfig from Kafka</a></li><li><a href="#example-of-an-fvclusteringconfigrecord-from-kafka">Example of an FVClusteringConfigRecord from Kafka</a></li><li><a href="#examples-of-fvclusterupdaterecord-from-kafka">Examples of FVClusterUpdateRecord from Kafka</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="../../" class="nav-home"></a><div class="help"><h5>Help</h5><a href="docs/assets/UVAP_License_Terms.pdf">UVAP License Terms</a><a href="../../docs/help/uvap_gloss.html">Glossary</a><a href="../../docs/help/uvap_notations.html">Typographic Conventions</a><a href="../../docs/help/uvap_tm.html">Trademark Information</a><a href="../../docs/help/uvap_support.html">Support</a></div><div class="nav"><h5>Navigation</h5><a href="../../docs/feat/feat_overview.html">Key Features</a><a href="../../docs/demo/demo_overview.html">Feature Demos</a><a href="../../docs/install/uvap_install_sysreq.html">Installation</a><a href="../../docs/dev/uvap_architect.html">Developer Guide</a><a href="../../docs/tutorials/uvap_example_analysis.html">Tutorials</a><a href="../../help.html">Help</a></div><div class="comm"><h5>Community</h5><a href="https://github.com/Ultinous/uvap" target="_blank">GitHub</a><a href="https://www.facebook.com/ultinousltd/" target="_blank">Facebook</a><a href="https://www.linkedin.com/company/6380970/" target="_blank">LinkedIn</a><a href="https://twitter.com/ultinousltd" target="_blank">Twitter</a><a href="https://www.youtube.com/channel/UCeQmAy_RLLhgcTxSCFljBDA" target="_blank">YouTube</a></div></section><a href="https://www.ultinous.com" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="../../img/Ultinous-logo_white_web.png" alt="Ultinous"/></a><section class="copyright">Copyright © 2019-2020 Ultinous</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '537f90d4167048c6fde59df438687767',
                indexName: 'uvap',
                inputSelector: '#search_input_react'
              });
            </script></body></html>