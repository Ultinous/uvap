<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Configuring Pass Detector · UVAP</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Configuring Pass Detector"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Configuring Pass Detector · UVAP"/><meta property="og:type" content="website"/><meta property="og:url" content="http://docs.ultinous.com/uvap/../../index.html"/><meta property="og:description" content="# Configuring Pass Detector"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="../../img/face-200.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="../../css/code-block-buttons.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="../../js/code-block-copy-button.js"></script><script type="text/javascript" src="../../js/code-block-download-button.js"></script><script src="../../js/scrollSpy.js"></script><link rel="stylesheet" href="../../css/main.css"/><script src="../../js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="../../"><img class="logo" src="../../img/ultinous-logo-BW-logo.png" alt="UVAP"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="../../docs/feat/feat_overview.html" target="_self">Key Features</a></li><li class=""><a href="../../docs/demo/demo_overview.html" target="_self">Feature Demos</a></li><li class=""><a href="../../docs/install/uvap_install_sysreq.html" target="_self">Installation</a></li><li class="siteNavGroupActive"><a href="../../docs/dev/uvap_architect.html" target="_self">Developer Guide</a></li><li class=""><a href="../../docs/tutorials/uvap_example_analysis.html" target="_self">Tutorials</a></li><li class=""><a href="../../docs/help/uvap_support.html" target="_self">Help</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Microservice Configuration</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Developer Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="../../docs/dev/uvap_architect.html">Architecture</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/uvap_data_model.html">Data Model</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Microservices</h4><ul><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_mgr.html">Multi-Graph Runner</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_track.html">Tracker</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_passdet.html">Pass Detector</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_reid.html">Reidentifier</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_cluster.html">Feature Vector Clustering</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/ms_det_filter.html">Detection Filter</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Microservice Configuration</h4><ul><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_superconfig.html">Microservice Superconfiguration</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_mgr.html">Configuring Multi-Graph Runner</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_track.html">Configuring Tracker</a></li><li class="navListItem navListItemActive"><a class="navItem" href="../../docs/dev/conf_passdet.html">Configuring Pass Detector</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_reid.html">Configuring Reidentifier</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_cluster.html">Configuring Feature Vector Clustering</a></li><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_det_filter.html">Configuring Detection Filter</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tools</h4><ul><li class="navListItem"><a class="navItem" href="../../docs/dev/conf_sc_ui.html">Stream Configurator UI Guide</a></li></ul></div><li class="navListItem"><a class="navItem" href="../../docs/dev/uvap_extend.html">Extending UVAP</a></li><li class="navListItem"><a class="navItem" href="../../docs/operation/op_opguide.html">UVAP Operation Guide</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="configuring-pass-detector"></a><a href="#configuring-pass-detector" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring Pass Detector</h1>
<p>This microservice does not require GPU resources. <strong>Pass Detector</strong> processes
records from a source topic and writes the result to its target topic.</p>
<p><strong>Pass Detector</strong> can run in <em>batch mode</em>. When running in batch mode,
the microservice stops after processing the last record.
Otherwise it keeps running and waits for more records.</p>
<h2><a class="anchor" aria-hidden="true" id="environment-variables"></a><a href="#environment-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment Variables</h2>
<ul>
<li><code>KAFKA_PASSDET_MS_PROPERTY_FILE_PATHS</code>: property file list</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="properties"></a><a href="#properties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Properties</h2>
<p>The values of properties with the <code>.file</code> extension are the paths of the <code>.json</code>
files, while the values of properties with the <code>.data</code> extension are the <code>.json</code>
configurations themselves.</p>
<blockquote>
<p><strong>Note</strong>
Setting <code>.data</code> and <code>.file</code> properties are exclusive to each other,
setting both of them results in an error.</p>
</blockquote>
<p>For an example of Pass Detector properties,
see <a href="../../templates/uvap_kafka_passdet_base_TEMPLATE.properties.html">Pass Detector Template Properties</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkapassdetmsconfigdata"></a><a href="#ultinousservicekafkapassdetmsconfigdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.passdet.ms.config.data</h3>
<table>
<thead>
<tr><th>Property</th><th>ultinous.service.kafka.passdet.ms.config.data</th></tr>
</thead>
<tbody>
<tr><td>Description</td><td><strong>Pass Detector</strong> microservice configuration, and optionally authentication and functional configuration. Content must be in one-liner JSON format described in <a href="../../docs/dev/conf_superconfig.html#topic-definitions">Superconfig Topic Definitions</a>.</td></tr>
<tr><td>Required</td><td>Required if <code>ultinous.service.kafka.passdet.ms.config.file</code> not given.</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkapassdetmsconfigfile"></a><a href="#ultinousservicekafkapassdetmsconfigfile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.passdet.ms.config.file</h3>
<table>
<thead>
<tr><th>Property</th><th>ultinous.service.kafka.passdet.ms.config.file</th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Path to a microservice configuration file.<br/> The file contents must be in JSON format, according to <code>ultinous.service.kafka.passdet.ms.config.data</code> above.</td></tr>
<tr><td>Required</td><td>Required if <code>ultinous.service.kafka.passdet.ms.config.data</code> not given.</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="microservice-configuration-example"></a><a href="#microservice-configuration-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Microservice Configuration Example:</h3>
<pre><code class="hljs css language-json5 codeBlockCopy">{
  <span class="hljs-attr">"source_options"</span>: {
    <span class="hljs-attr">"start"</span>:<span class="hljs-string">"START_DATETIME"</span>,
    <span class="hljs-attr">"start_date_time"</span>: <span class="hljs-string">"2019-05-31T10:30:00.000 +02:00"</span>,
    <span class="hljs-attr">"end"</span>:<span class="hljs-string">"END_NEVER"</span>
  },
  <span class="hljs-attr">"source"</span>: {
    <span class="hljs-attr">"broker_list"</span>: <span class="hljs-string">"127.0.0.1:6499"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"some_kafka_topic.TrackChangeRecord.json"</span>
  },
  <span class="hljs-attr">"target_options"</span>: {
    <span class="hljs-attr">"handling"</span>: <span class="hljs-string">"REPLACE"</span>
  },
  <span class="hljs-attr">"target"</span>: {
    <span class="hljs-attr">"broker_list"</span>: <span class="hljs-string">"127.0.0.1:6499"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"some_other_kafka_topic.PassDetectionRecord.json"</span>
  },
  <span class="hljs-attr">"config_data"</span>: { <span class="hljs-attr">"..."</span>: <span class="hljs-string">"..."</span> }
}
</code></pre>
<p>In this example, the sources are set to be read from the given date and never
stop reading them. One track change source is defined with broker list and
name. Existing messages in the target stream are replaced.</p>
<p>For an example of the properties of the <code>config_data</code> field, see the
<a href="#example-of-a-passdetconfigrecord">Example of a PassDetConfigRecord</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkapassdetconfigdata"></a><a href="#ultinousservicekafkapassdetconfigdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.passdet.config.data</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.passdet.config.data</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td><strong>Pass Detector</strong> functional configuration.<br/> The <code>PassDetConfigRecord</code> definition should be in JSON format as defined in the <a href="../../proto_files/ultinous/proto/common/kafka_config.proto.html">Kafka configuration proto</a>, see the example below.</td></tr>
<tr><td>Required</td><td>Optional</td></tr>
<tr><td>Value Type</td><td><code>string</code></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkapassdetconfigfile"></a><a href="#ultinousservicekafkapassdetconfigfile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.passdet.config.file</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.passdet.config.file</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Path to a functional configuration file.<br/> The file contents must be in JSON format, according to <code>ultinous.service.kafka.passdet.config.data</code> above.</td></tr>
<tr><td>Required</td><td>Optional</td></tr>
<tr><td>Value Type</td><td><code>string</code></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="example-of-a-passdetconfigrecord"></a><a href="#example-of-a-passdetconfigrecord" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example of a PassDetConfigRecord</h3>
<pre><code class="hljs css language-json5 codeBlockCopy"> {
   <span class="hljs-attr">"passLines"</span>: [
     {
       <span class="hljs-attr">"id"</span>: <span class="hljs-string">"pass_1"</span>,
       <span class="hljs-attr">"poly"</span>: [
         {<span class="hljs-attr">"x"</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">500</span>},
         {<span class="hljs-attr">"x"</span>: <span class="hljs-number">1870</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">500</span>}
       ]
     },
     {
       <span class="hljs-attr">"id"</span>: <span class="hljs-string">"pass_2"</span>,
       <span class="hljs-attr">"poly"</span>: [
         {<span class="hljs-attr">"x"</span>: <span class="hljs-number">960</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">980</span>},
         {<span class="hljs-attr">"x"</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">560</span>},
         {<span class="hljs-attr">"x"</span>: <span class="hljs-number">960</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">100</span>}
       ]
     }
   ]
 }
</code></pre>
<blockquote>
<p><strong>Note</strong>
UVAP provides an easy-to-use tool for pass line configuration called
<strong>Stream Configurator</strong>.
For further information, see <a href="../../docs/feat/other/feat_stream_config.html">Stream Configuration</a>.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkapassdetauthdefsdata"></a><a href="#ultinousservicekafkapassdetauthdefsdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.passdet.auth.defs.data</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.passdet.auth.defs.data</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Authentication definition data in one-liner JSON format corresponding to the definitions described in <a href="../../docs/dev/conf_superconfig.html#authentication-definition">Superconfig Authentication Definitions</a>.</td></tr>
<tr><td>Required</td><td>Optional</td></tr>
<tr><td>Note</td><td>Required if ID based authentication is used in <code>ultinous.service.kafka.passdet.ms.config.*</code></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkapassdetauthdefsfile"></a><a href="#ultinousservicekafkapassdetauthdefsfile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.passdet.auth.defs.file</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.passdet.auth.defs.file</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Authentication definition file path. Content of the file should be in JSON format described described in <a href="../../docs/dev/conf_superconfig.html#authentication-definition">Superconfig Authentication Definitions</a>.</td></tr>
<tr><td>Required</td><td>Optional</td></tr>
<tr><td>Note</td><td>Required if ID based authentication is used in <code>ultinous.service.kafka.passdet.ms.config.*</code></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkapassdetmonitoringport"></a><a href="#ultinousservicekafkapassdetmonitoringport" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.passdet.monitoring.port</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.passdet.monitoring.port</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Monitoring server port.</td></tr>
<tr><td>Required</td><td>Required</td></tr>
<tr><td>Value Type</td><td><code>uint16</code></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="ultinousservicekafkapassdetmonitoringthreads"></a><a href="#ultinousservicekafkapassdetmonitoringthreads" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ultinous.service.kafka.passdet.monitoring.threads</h3>
<table>
<thead>
<tr><th>Property</th><th><code>ultinous.service.kafka.passdet.monitoring.threads</code></th></tr>
</thead>
<tbody>
<tr><td>Description</td><td>Monitoring server thread pool size.</td></tr>
<tr><td>Required</td><td><strong>N/A</strong></td></tr>
<tr><td>Value Type</td><td><code>uint16</code></td></tr>
<tr><td>Default Value</td><td><code>1</code></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="changing-the-configuration"></a><a href="#changing-the-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Changing the Configuration</h2>
<p>It is possible to modify the configuration while <strong>Pass Detector</strong> is running. When you modify
the configuration files on disk, <strong>Pass Detector</strong> will not automatically reload them. Instead,
this can be achieved by posting a HTTP <code>reload</code> request through the monitoring port
of the microservice. (The monitoring port is given in the <strong>Pass Detector</strong> property file,
e.g. the <a href="../../templates/uvap_kafka_passdet_base_TEMPLATE.properties.html">Pass Detector Template Properties</a>.)</p>
<p>For example:</p>
<pre><code class="hljs">$ curl -X POST http://localhost:6495/reload
</code></pre>
<p>will reload the configuration files.</p>
<blockquote>
<p><strong>Note</strong>  <br>
The values of the <code>ultinous.service.kafka.passdet.monitoring.port</code>
and <code>ultinous.service.kafka.passdet.monitoring.threads</code> properties cannot be changed.</p>
</blockquote>
<p>The result of the <code>reload</code> operation is the same as if the service was stopped
and restarted with the new configuration. However, it can be done using the
microservice API, without maintenance privileges.</p>
<h3><a class="anchor" aria-hidden="true" id="empty-configuration"></a><a href="#empty-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Empty Configuration</h3>
<p>It is also possible to start <strong>Pass Detector</strong> with an &quot;empty&quot; configuration
and switch to a valid configuration later. In this case, the service
will be running and healthy but it will not process any inputs
until an acceptable configuration is reloaded.</p>
<blockquote>
<p><strong>Attention</strong>  <br>
In order for the service to run, even the &quot;empty&quot; configuration must contain
a valid value for <code>ultinous.service.kafka.passdet.monitoring.port</code>.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="invalid-configuration"></a><a href="#invalid-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Invalid Configuration</h3>
<p>Invalid configuration is treated the same way as empty configuration, i.e.
<strong>Pass Detector</strong> will run without processing any inputs. Note, however,
that at least <code>ultinous.service.kafka.passdet.monitoring.port</code>
needs to be provided for the service to run.</p>
<p>If changing the configuration results in any error, e.g. because of invalid
configuration, the <code>reload</code> request returns the error code <strong>500</strong>. In this case,
<strong>Pass Detector</strong> will also continue running without processing any inputs.</p>
<h2><a class="anchor" aria-hidden="true" id="output-schemas"></a><a href="#output-schemas" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output Schemas</h2>
<p>The schema definition of <code>TrackChangeRecord</code> and <code>PassDetectionRecord</code> can be
found in the <a href="../../proto_files/ultinous/proto/common/kafka_data.proto.html">Kafka data proto</a>.</p>
<p>Example of a <code>PassDetectionRecord</code> from Kafka:</p>
<pre><code class="hljs">PASS_CANDIDATE:
{
  "timestamp": 1564493689341,
  "key": "pass_01",
  "value": {
    "type": "PASS_CANDIDATE",
    "pass_candidate": {
      "pass": {
        "id": {
          "track_key": "1564493689041_50187",
          "serial": 0
        },
        "pass_line_id": "pass_01",
        "cross_dir": "RL",
        "section_idx": 0,
        "cross_point": {
          "x": 511,
          "y": 500
        }
      },
      "is_extrapolated": false
    }
  },
  "headers": "[('format', b'json'), ('type', b'PassDetectionRecord')]"
}
PASS_REALIZED:
{
  "timestamp": 1564493689341,
  "key": null,
  "value": {
    "type": "PASS_REALIZED",
    "pass_realized": {
      "pass_event_ref": {
        "track_key": "1564493689041_50187",
        "serial": 0
      }
    }
  },
  "headers": "[('format', b'json'), ('type', b'PassDetectionRecord')]"
},
HEARTBEAT:
{
  "timestamp": 1564493689341,
  "key": null,
  "value": {
    "type": "HEARTBEAT"
  },
  "headers": "[('format', b'json'), ('type', b'PassDetectionRecord')]"
}
END_OF_TRACK:
{
  "timestamp": 1564493689341,
  "key": null,
  "value": {
    "type": "END_OF_TRACK",
    "end_of_track": {
      "track_key": "1564493689041_50187"
    }
  },
  "headers": "[('format', b'json'), ('type', b'PassDetectionRecord')]"
}
</code></pre>
<blockquote>
<p><strong>Note</strong>:<br>
The <code>key</code> is empty in the following cases:</p>
<ul>
<li>The record is only a <code>HEARTBEAT</code> message.</li>
<li>The record is an end-of-track signal.</li>
<li>The record is a <strong>Pass Realization</strong> (see below).</li>
</ul>
</blockquote>
<p><a name="pass_detection_example"></a>
<img src="../assets/pass_detection_example.png" alt="Dataflow Architecture of UVAP">  <br>
<em>Pass Detection Example</em></p>
<p><a name="pass_realization"></a></p>
<blockquote>
<p><strong>Pass Realization</strong>  <br>
A <code>TrackChangeRecord</code> triggering a Pass Detection is not always derived from a
&quot;real&quot; detection. The track change can also come from a prediction of the next
track position. In this case, the <code>is_extrapolated</code> field of the <code>PassDetectionRecord</code>
is <code>true</code>. After the predicted detection the track usually continues with a
&quot;real&quot; detection.</p>
</blockquote>
<p>In this case a new <code>PassDetectionRecord</code> is inserted into the target topic with an
empty <code>key</code> but with the appropriate non-empty <code>track_key</code>.</p>
<p>See the <a href="../../proto_files/ultinous/proto/common/kafka_data.proto.html">Kafka data proto</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="feature-demo"></a><a href="#feature-demo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Feature Demo</h2>
<p>For the pass detection feature demo, see <a href="../../docs/demo/demo_pass_det.html">Pass Detection Demo</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="../../docs/dev/conf_track.html"><span class="arrow-prev">← </span><span>Configuring Tracker</span></a><a class="docs-next button" href="../../docs/dev/conf_reid.html"><span>Configuring Reidentifier</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#environment-variables">Environment Variables</a></li><li><a href="#properties">Properties</a><ul class="toc-headings"><li><a href="#ultinousservicekafkapassdetmsconfigdata">ultinous.service.kafka.passdet.ms.config.data</a></li><li><a href="#ultinousservicekafkapassdetmsconfigfile">ultinous.service.kafka.passdet.ms.config.file</a></li><li><a href="#microservice-configuration-example">Microservice Configuration Example:</a></li><li><a href="#ultinousservicekafkapassdetconfigdata">ultinous.service.kafka.passdet.config.data</a></li><li><a href="#ultinousservicekafkapassdetconfigfile">ultinous.service.kafka.passdet.config.file</a></li><li><a href="#example-of-a-passdetconfigrecord">Example of a PassDetConfigRecord</a></li><li><a href="#ultinousservicekafkapassdetauthdefsdata">ultinous.service.kafka.passdet.auth.defs.data</a></li><li><a href="#ultinousservicekafkapassdetauthdefsfile">ultinous.service.kafka.passdet.auth.defs.file</a></li><li><a href="#ultinousservicekafkapassdetmonitoringport">ultinous.service.kafka.passdet.monitoring.port</a></li><li><a href="#ultinousservicekafkapassdetmonitoringthreads">ultinous.service.kafka.passdet.monitoring.threads</a></li></ul></li><li><a href="#changing-the-configuration">Changing the Configuration</a><ul class="toc-headings"><li><a href="#empty-configuration">Empty Configuration</a></li><li><a href="#invalid-configuration">Invalid Configuration</a></li></ul></li><li><a href="#output-schemas">Output Schemas</a></li><li><a href="#feature-demo">Feature Demo</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="../../" class="nav-home"></a><div class="help"><h5>Help</h5><a href="docs/assets/UVAP_License_Terms.pdf">UVAP License Terms</a><a href="../../docs/help/uvap_gloss.html">Glossary</a><a href="../../docs/help/uvap_notations.html">Typographic Conventions</a><a href="../../docs/help/uvap_tm.html">Trademark Information</a><a href="../../docs/help/uvap_support.html">Support</a></div><div class="nav"><h5>Navigation</h5><a href="../../docs/feat/feat_overview.html">Key Features</a><a href="../../docs/demo/demo_overview.html">Feature Demos</a><a href="../../docs/install/uvap_install_sysreq.html">Installation</a><a href="../../docs/dev/uvap_architect.html">Developer Guide</a><a href="../../docs/tutorials/uvap_example_analysis.html">Tutorials</a><a href="../../help.html">Help</a></div><div class="comm"><h5>Community</h5><a href="https://github.com/Ultinous/uvap" target="_blank">GitHub</a><a href="https://www.facebook.com/ultinousltd/" target="_blank">Facebook</a><a href="https://www.linkedin.com/company/6380970/" target="_blank">LinkedIn</a><a href="https://twitter.com/ultinousltd" target="_blank">Twitter</a><a href="https://www.youtube.com/channel/UCeQmAy_RLLhgcTxSCFljBDA" target="_blank">YouTube</a></div></section><a href="https://www.ultinous.com" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="../../img/Ultinous-logo_white_web.png" alt="Ultinous"/></a><section class="copyright">Copyright © 2019-2020 Ultinous</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '537f90d4167048c6fde59df438687767',
                indexName: 'uvap',
                inputSelector: '#search_input_react'
              });
            </script></body></html>